import pygame
import random

# Initialize game
pygame.init()
WIDTH, HEIGHT = 900, 600
win = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption("üèì Ping Pong Royale üíõ")

# Colors
GOLD = (255, 215, 0)
BLACK = (10, 10, 10)
MARBLE = (30, 30, 30)

# Fonts & Speed
font = pygame.font.SysFont('georgia', 36, bold=True)
clock = pygame.time.Clock()
fps = 60

# Paddle & Ball setup
paddle_width, paddle_height = 12, 100
ball_radius = 12
left_paddle = pygame.Rect(20, HEIGHT//2 - paddle_height//2, paddle_width, paddle_height)
right_paddle = pygame.Rect(WIDTH - 20 - paddle_width, HEIGHT//2 - paddle_height//2, paddle_width, paddle_height)
ball = pygame.Rect(WIDTH//2 - ball_radius//2, HEIGHT//2 - ball_radius//2, ball_radius, ball_radius)
ball_speed_x = 7 * random.choice((-1, 1))
ball_speed_y = 7 * random.choice((-1, 1))

# Score
left_score = 0
right_score = 0

def draw_window():
    win.fill(MARBLE)

    # Title
    title = font.render("Ping Pong Royale üíõ", True, GOLD)
    win.blit(title, (WIDTH//2 - title.get_width()//2, 20))

    # Center Line
    for i in range(0, HEIGHT, 30):
        if i % 60 == 0:
            pygame.draw.rect(win, GOLD, (WIDTH//2 - 1, i, 2, 30))

    # Paddles and Ball
    pygame.draw.rect(win, GOLD, left_paddle)
    pygame.draw.rect(win, GOLD, right_paddle)
    pygame.draw.ellipse(win, GOLD, ball)

    # Scoreboard
    left_txt = font.render(str(left_score), True, GOLD)
    right_txt = font.render(str(right_score), True, GOLD)
    win.blit(left_txt, (WIDTH//4 - left_txt.get_width()//2, 60))
    win.blit(right_txt, (WIDTH*3//4 - right_txt.get_width()//2, 60))

    pygame.display.update()

def reset_ball():
    global ball_speed_x, ball_speed_y
    ball.center = (WIDTH//2, HEIGHT//2)
    ball_speed_x *= random.choice((-1, 1))
    ball_speed_y *= random.choice((-1, 1))

def move_ball():
    global ball_speed_x, ball_speed_y, left_score, right_score
    ball.x += int(ball_speed_x)
    ball.y += int(ball_speed_y)

    if ball.top <= 0 or ball.bottom >= HEIGHT:
        ball_speed_y *= -1

    if ball.colliderect(left_paddle) or ball.colliderect(right_paddle):
        ball_speed_x *= -1.1
        ball_speed_y *= 1.05

    if ball.left <= 0:
        right_score += 1
        reset_ball()
    if ball.right >= WIDTH:
        left_score += 1
        reset_ball()

def move_paddles(keys):
    speed = 9
    if keys[pygame.K_w] and left_paddle.top > 0:
        left_paddle.y -= speed
    if keys[pygame.K_s] and left_paddle.bottom < HEIGHT:
        left_paddle.y += speed
    if keys[pygame.K_UP] and right_paddle.top > 0:
        right_paddle.y -= speed
    if keys[pygame.K_DOWN] and right_paddle.bottom < HEIGHT:
        right_paddle.y += speed

def main():
    global running
    running = True
    while running:
        clock.tick(fps)
        keys = pygame.key.get_pressed()
        move_paddles(keys)
        move_ball()
        draw_window()

        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

    pygame.quit()

if __name__ == "__main__":
    main()
